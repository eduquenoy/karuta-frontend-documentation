---
layout: archive
permalink: /batch_fr/
title: "Batch"
sidebar:
 nav: "batch_fr"
---
<!- =========================================== ->
<h3>Fonctionnement</h3>
<!- =========================================== ->

<p>Les commandes Batch permettent d'automatiser la création, modification et suppression de portfolios.</p>
<img src='../assets/img/execute-batch.png' width='80%'/>
<p>À partir d'un ou plusieurs modèles de protfolios, d'un script batch et d'un fichier CSV, KARUTA va créer les usagers et leurs portfolios associés.</p>
<p>Exemple de script</p>
<img src='../assets/img/batch-script.png'/>
<ul>
	<p>Pour chaque ligne</p>
	<li>Créer un usager si il n'existe pas</li>
	<li>Créer un portfolio profil</li>
	<li>Partager le portfolio profil avec le rôle student</li>
	<li>Mettre à jour les champs nom et prénon dans le profil</li>
	<li>Créer un portfolio d'évaluation</li>
	<li>Partager le portfolio d'évaluation avec le rôle student</li>
	<li>Mettre à jour le Proxy du portfolio d'évaluation vers le portfolio profil</li>
</ul>
<p>Exemple de fichier CSV</p>
<img src='../assets/img/csv-file.png'/>
<p>Le fichier contient les informations nécessaires à l'éxécution du batch.</p>
<!- =========================================== ->
<h3>Structure du fichier CSV</h3>
<!- =========================================== ->
<p><var>Ligne 1 : </var> Ce sont les noms des variables 'globales', c'est à dire les variables qui ont les même valeurs pour toutes les lignes. <code>model_code</code> est un nom réservé. C'est le code du batch à exécuter. dans le batch les références au variables globales seront précédées de <code>//</code></p>
<p><var>Ligne 2 : </var> Ce sont respectivement les valeurs des variables globales. Dans l'exemple présenté la valeur de model_code est createStudents</p>
<p><var>Ligne 3 : </var> Ce sont les noms des variables 'locales', c'est à dire les variables qui ont des valeurs différentes pour chaque ligne.</p>
<p><var>Ligne 4 et +  : </var> Ce sont respectivement les valeurs des variables locales.</p>

<!- =========================================== ->
<h3>Commandes</h3>
<!- =========================================== ->
Les commandes disponibles sont :
<ul>
	<li><a href='#for-each-line'><code>ForEachLine</code></a></li>
</ul>
<h4>Commandes pour les usagers</h4>
<ul>
	<li><a href='#create-person'><code>CreatePerson</code></a></li>
	<li><code>DeletePerson</code></li>
	<li><code>JoinUserGroup</code></li>
	<li><code>LeaveUserGroup</code></li>
</ul>
<h4>Commandes pour les portfolios</h4>
<ul>
	<li><code>CreateTree</code></li>
	<li><code>ShareTree</code></li>
	<li><code>UnshareTree</code></li>
	<li><code>SelectTree</code></li>
	<li><code>DeleteTree</code></li>
</ul>
<h4>Commandes pour les groupes de portfolios</h4>
<ul>
	<li><code>JoinPortfolioGroup</code></li>
</ul>
<h4>Commandes pour le partage/départage avec des groupes d'usagers</h4>
<ul>
	<li><code>ShareUserGroup</code></li>
	<li><code>UnshareUserGroup</code></li>
</ul>
<h4>Commandes pour ajout dans portfolios</h4>
<ul>
	<li><code>ImportNode</code></li>
	<li><code>MoveUp</code></li>
</ul>
<h4>Commandes de mise à jour d'éléments</h4>
<ul>
	<li><code>UpdateField</code></li>
	<li><code>UpdateProxy</code></li>
	<li><code>UpdateDashboard</code></li>
	<li><code>UpdateTreeRoot</code></li>
</ul>
<h4>Commandes de mise à jour des métadonnées</h4>
<ul>
	<li><code>UpdateMetadataQuery</code></li>
	<li><code>UpdateMetadataMenu</code></li>
	<li><code>UpdateMetadataInline</code></li>
	<li><code>UpdateMetadata</code></li>
	<li><code>UpdateMetadataWad</code></li>
</ul>

<article>
	<h3 id='for-each-line'>ForEachLine</h4>
	<p>ForEachLine est une boucle. Les commandes du ForEchLine seront exécutés pour chaque ligne du Fichier CSV.</p>
</article>

<article>
	<h3 id='create-person'>CreatePerson</h4>
	<p></p>
	<h4>Champs</h4>
	<p><var>Identifiant</var></p>
	<p><var>Prénom</var></p>
	<p><var>Nom</var></p>
	<p><var>Courriel</var></p>
	<p><var>Mot de passe</var></p>
	<p><var>Créateur?</var></p>
</article>

<h4>À venir ...</h4>