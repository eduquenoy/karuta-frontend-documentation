---
layout: archive
permalink: /batch_fr/
title: "Batch"
sidebar:
 nav: "batch_fr"
---
<!- =========================================== ->
<h3>Fonctionnement</h3>
<!- =========================================== ->

<p>Les commandes Batch permettent d'automatiser la création, modification et suppression de portfolios ainsi que la création ou suppresion d'usagers.</p>
<img src='../assets/img/execute-batch.png' width='80%'/>
<p>À partir d'un ou plusieurs modèles de portfolios, d'un script batch et d'un fichier CSV, KARUTA va créer les usagers et leurs portfolios associés.</p>
<p>Exemple de script</p>
<img src='../assets/img/batch-script.png'/>
<ul>
	<p>Pour chaque ligne</p>
	<li>Créer un usager si il n'existe pas</li>
	<li>Créer un portfolio profil</li>
	<li>Partager le portfolio profil avec le rôle student</li>
	<li>Mettre à jour les champs nom et prénon dans le profil</li>
	<li>Créer un portfolio d'évaluation</li>
	<li>Partager le portfolio d'évaluation avec le rôle student</li>
	<li>Mettre à jour le Proxy du portfolio d'évaluation vers le portfolio profil</li>
</ul>
<p>Exemple de fichier CSV</p>
<img src='../assets/img/csv-file.png'/>
<p>Le fichier contient les informations nécessaires à l'éxécution du batch.</p>
<!- =========================================== ->
<h3>Structure du fichier CSV</h3>
<!- =========================================== ->
<p><code>Ligne 1 : </code> Ce sont les noms des variables 'globales', c'est à dire les variables qui ont les même valeurs pour toutes les lignes. <code>model_code</code> est un nom réservé. C'est le code du batch à exécuter. Dans le batch les références au variables globales seront précédées de <code>//</code></p>
<p><code>Ligne 2 : </code> Ce sont respectivement les valeurs des variables globales. Dans l'exemple présenté la valeur de model_code est createStudents</p>
<p><code>Ligne 3 : </code> Ce sont les noms des variables 'locales', c'est à dire les variables qui ont des valeurs différentes pour chaque ligne.</p>
<p><code>Ligne 4 et +  : </code> Ce sont respectivement les valeurs des variables locales.</p>

<!- =========================================== ->
<h3>Commandes</h3>
<!- =========================================== ->
Les commandes disponibles sont :
<ul>
	<li><a href='#for-each-line'><code>ForEachLine</code></a></li>
</ul>
<h4>Commandes pour les usagers</h4>
<ul>
	<li><a href='#create-person'><code>CreatePerson</code></a></li>
	<li><code>DeletePerson</code></li>
	<li><code>JoinUserGroup</code></li>
	<li><code>LeaveUserGroup</code></li>
</ul>
<h4>Commandes pour les portfolios</h4>
<ul>
	<li><code>CreateTree</code></li>
	<li><code>ShareTree</code></li>
	<li><code>UnshareTree</code></li>
	<li><code>SelectTree</code></li>
	<li><code>DeleteTree</code></li>
</ul>
<h4>Commandes pour les groupes de portfolios</h4>
<ul>
	<li><code>JoinPortfolioGroup</code></li>
</ul>
<h4>Commandes pour le partage/départage avec des groupes d'usagers</h4>
<ul>
	<li><code>ShareUserGroup</code></li>
	<li><code>UnshareUserGroup</code></li>
</ul>
<h4>Commandes pour ajout dans portfolios</h4>
<ul>
	<li><code>ImportNode</code></li>
	<li><code>MoveUp</code></li>
</ul>
<h4>Commandes de mise à jour d'éléments</h4>
<ul>
	<li><code>UpdateField</code></li>
	<li><code>UpdateProxy</code></li>
	<li><code>UpdateDashboard</code></li>
	<li><code>UpdateTreeRoot</code></li>
</ul>
<h4>Commandes de mise à jour des métadonnées</h4>
<ul>
	<li><code>UpdateMetadataQuery</code></li>
	<li><code>UpdateMetadataMenu</code></li>
	<li><code>UpdateMetadataInline</code></li>
	<li><code>UpdateMetadata</code></li>
	<li><code>UpdateMetadataWad</code></li>
</ul>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='for-each-line'>ForEachLine</h3>
	<p>ForEachLine est une boucle. Les commandes du ForEachLine seront exécutées pour chaque ligne du Fichier CSV.</p>
</article>


<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='create-person'>CreatePerson</h3>
	<p>La commande crée un usager avec les informations fournies dans les champs de la commande.</p>
	<h4>Champs</h4>
	<p><code>Identifiant</code></p>
	<p><code>Prénom</code></p>
	<p><code>Nom</code></p>
	<p><code>Courriel</code></p>
	<p><code>Mot de passe</code></p>
	<p><code>Créateur?</code></p>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='delete-person'>DeletePerson</h3>
	<p>La commande permet de supprimer un usager</p>
	<h4>Champ</h4>
	<p><code>Identifiant</code></p>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='join-usergroup'>JoinUserGroup</h3>
	<p>La commande permet de mettre un usager daans un groupe d'usager</p>
	<h4>Champs</h4>
	<p><code>Personne</code> Il faut ajouter un select pour une variable ou value pour spécifier directement une valeur</p>
	<p><code>Groupe</code> Il faut ajouter un select pour une variable ou value pour spécifier directement une valeur</p>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='leave-usergroup'>LeaveUserGroup</h3>
	<p></p>
	<h4>Champs</h4>
	<p><code>Personne</code> Il faut ajouter un select pour une variable ou value pour spécifier directement une valeur</p>
	<p><code>Groupe</code> Il faut ajouter un select pour une variable ou value pour spécifier directement une valeur</p>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='create-tree'>CreateTree</h3>
	<p>La commande permet de créer un portfolio à partir d'un modèle de portfolio et de précider le code et le libellé du portfolio qui sera créé.</p>
	<h4>Champs</h4>
	<p><code>ID</code>l'ID est utilisé, dans les commandes nécessitant la sélection d'un arbre, pour faire référence à ce portfolio, par exemple, pour le partager avec un usager.</p>
	<p><code>Modèle</code> Il faut ajouter un select pour une variable et/ou value pour spécifier directement une valeur</p>
	<p><code>Code</code> Il faut ajouter un select pour une variable et/ou value pour spécifier directement une valeur</p>
	<p><code>Libellé</code> Il faut ajouter un select pour une variable et/ou value pour spécifier directement une valeur</p>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='share-tree'>ShareTree</h3>
	<p>La commande permet de partager un portfolio avec un usager dans un rôle donné.</p>
	<h4>Champs</h4>
	<p><code>Sélection arbre</code> permet de sélectionner l'id du portfolio concerné par le partage.</p>
	<p><code>Personne</code> Il faut ajouter un select pour une variable ou value pour spécifier directement une valeur</p>
	<p><code>Rôle</code> Il faut ajouter un select pour une variable ou value pour spécifier directement une valeur</p>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='select-tree'>SelectTree</h3>
	<p>La commande permet de sélectionner un portfolio qui sera référencé dans d'autres commandes.</p>
	<h4>Champ</h4>
	<p><code>Code</code> Il faut ajouter un select pour une variable et/ou value pour spécifier directement une valeur</p>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='delete-tree'>DeleteTree</h3>
	<p>La commande permet de supprimer un portfolio.</p>
	<h4>Champ</h4>
	<p><code>Code</code> Il faut ajouter un select pour une variable et/ou value pour spécifier directement une valeur</p>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='join-portfoliogroup'>JoinPortfolioGroup</h3>
	<p>La commande permet d'ajouter un portfolio à un groupe de portfolios.</p>
	<h4>Champs</h4>
	<p><code>Sélection arbre</code> permet de sélectionner l'id du portfolio concerné par le partage.</p>
	<p><code>Groupe</code> Il faut ajouter un select pour une variable ou value pour spécifier directement une valeur</p>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='share-usergroup'>ShareUserGroup</h3>
	<p>La commande permet de partager un portfolio avec un groupe d'usagers avec un rôle donné.</p>
	<h4>Champs</h4>
	<p><code>Sélection arbre</code> permet de sélectionner l'id du portfolio concerné par le partage.</p>
	<p><code>Groupe</code> Il faut ajouter un select pour une variable ou value pour spécifier directement une valeur</p>
	<p><code>Rôle</code> Il faut ajouter un select pour une variable ou value pour spécifier directement une valeur</p>
</article>

<article>
	<a style='float:right' href='#top'><img src='../assets/img/arrow-up.png'/></a>
	<h3 id='unshare-usergroup'>UnshareUserGroup</h3>
	<p>La commande permet de partager un portfolio avec un groupe d'usagers avec un rôle donné.</p>
	<h4>Champs</h4>
	<p><code>Sélection arbre</code> permet de sélectionner l'id du portfolio concerné par le partage.</p>
	<p><code>Groupe</code> Il faut ajouter un select pour une variable ou value pour spécifier directement une valeur</p>
	<p><code>Rôle</code> Il faut ajouter un select pour une variable ou value pour spécifier directement une valeur</p>
</article>

<h4>À venir ...</h4>